---
# Maybe later we can add some removal tasks

- name: Set OS dependent variables
  include_vars: "{{ item }}"
  with_first_found:
   - "{{ ansible_distribution }}_{{ ansible_distribution_major_version }}.yml"
   - "{{ ansible_distribution }}.yml"
   - "{{ ansible_os_family }}_{{ ansible_distribution_major_version }}.yml"
   - "{{ ansible_os_family }}.yml"
   - default.yml
  tags:
    - install
    - configure

- include: install_base.yml
  tags:
    - install

- include: install_debian.yml
  when: ansible_os_family == "Debian"
  tags:
    - install

- include: install_redhat.yml
  when: ansible_os_family == "RedHat"
  tags:
    - install

- include: configure_base.yml
  tags:
    - configure

- include: configure_debian.yml
  when: ansible_os_family == "Debian"
  tags:
    - configure

- include: configure_redhat.yml
  when: ansible_os_family == "RedHat"
  tags:
    - configure

- include: local_facts.yml
  tags:
    - gather_facts
